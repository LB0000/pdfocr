# PDF2MD拡張システム - フロントエンド要件分析

## 1. 概要

PDF2MD拡張システムのフェーズ2では、フェーズ1で構築したバックエンドAPIと連携する形で、ユーザーフレンドリーな管理ポータルを実装します。このドキュメントでは、フロントエンドの要件を分析し、実装方針を定義します。

## 2. 技術スタック

- **フレームワーク**: React + Next.js
- **スタイリング**: TailwindCSS
- **状態管理**: React Context API + React Query
- **フォーム管理**: React Hook Form
- **UI コンポーネント**: Headless UI + Tailwind
- **認証**: JWT認証（バックエンドと連携）
- **API通信**: Axios

## 3. 画面構成

### 3.1 認証関連画面

- **ログイン画面**
  - メールアドレスとパスワードによるログイン
  - エラーメッセージの表示
  - パスワードリセットリンク

- **ユーザー登録画面**（管理者のみ）
  - 新規ユーザー登録フォーム
  - ロール選択（admin, manager, user）

### 3.2 ダッシュボード

- **概要ダッシュボード**
  - 処理ステータス別ドキュメント数のグラフ表示
  - 最近処理したドキュメントのリスト
  - システム状態の表示

- **グローバルナビゲーション**
  - サイドバーメニュー
  - ユーザープロファイルドロップダウン
  - 通知エリア

### 3.3 ドキュメント管理

- **ドキュメント一覧画面**
  - ステータス、日付、テンプレートによるフィルタリング
  - ソート機能
  - ページネーション
  - 一括操作（削除、エクスポートなど）

- **ドキュメントアップロード画面**
  - ドラッグ&ドロップによるアップロード
  - テンプレート選択
  - メタデータ入力
  - アップロード進捗表示

- **ドキュメント詳細画面**
  - PDF原本表示
  - OCR結果表示
  - フィールド値の表示と編集
  - 処理履歴

### 3.4 テンプレート管理

- **テンプレート一覧画面**
  - テンプレート検索
  - ステータス表示（アクティブ/非アクティブ）
  - デフォルトテンプレート表示

- **テンプレート編集画面**
  - テンプレート基本情報編集
  - フィールド定義の追加/編集/削除
  - プレビュー機能

### 3.5 フィールド管理

- **フィールド定義画面**
  - フィールドタイプ選択（テキスト、数値、日付など）
  - バリデーションルール設定
  - 表示順序設定
  - 位置情報設定

### 3.6 OCR結果プレビュー・補正

- **OCR結果表示画面**
  - 原本PDFと認識結果の並列表示
  - フィールドごとのハイライト表示
  - 信頼度スコア表示

- **補正インターフェース**
  - インラインでのテキスト編集
  - 候補値の提案
  - 修正履歴の記録

## 4. 機能要件

### 4.1 認証・認可

- JWT認証によるセッション管理
- ロールベースのアクセス制御
- 自動ログアウト（セッションタイムアウト）
- トークンリフレッシュ機能

### 4.2 レスポンシブデザイン

- デスクトップ（1920px, 1440px, 1280px）
- タブレット（1024px, 768px）
- モバイル（基本的なレイアウト対応のみ）

### 4.3 パフォーマンス最適化

- コンポーネントの遅延ロード
- 画像の最適化
- APIレスポンスのキャッシュ
- ページネーションと無限スクロール

### 4.4 エラーハンドリング

- APIエラーの適切な表示
- フォームバリデーションエラーの表示
- オフライン状態の検出と通知
- リトライメカニズム

### 4.5 アクセシビリティ

- WAI-ARIA準拠
- キーボードナビゲーション
- スクリーンリーダー対応
- 十分なコントラスト比

## 5. 非機能要件

### 5.1 セキュリティ

- CSRF対策
- XSS対策
- 機密情報の適切な取り扱い
- 入力値のサニタイズ

### 5.2 パフォーマンス

- 初期ロード時間: 2秒以内
- インタラクション応答時間: 100ms以内
- Lighthouse スコア: 90以上

### 5.3 ブラウザ対応

- Chrome（最新2バージョン）
- Firefox（最新2バージョン）
- Safari（最新2バージョン）
- Edge（最新2バージョン）

## 6. 実装方針

### 6.1 コンポーネント設計

- Atomic Designパターンの採用
  - Atoms（ボタン、入力フィールドなど）
  - Molecules（フォームグループ、カードなど）
  - Organisms（ヘッダー、サイドバーなど）
  - Templates（ページレイアウト）
  - Pages（実際のページ）

### 6.2 状態管理

- グローバル状態: React Context API
- サーバー状態: React Query
- フォーム状態: React Hook Form

### 6.3 API通信

- Axiosインスタンスの設定
- インターセプターによるトークン管理
- エラーハンドリング
- リクエストのキャンセル

### 6.4 テスト戦略

- ユニットテスト: Jest + React Testing Library
- コンポーネントテスト: Storybook
- E2Eテスト: Cypress

## 7. 開発フロー

1. コンポーネントライブラリの構築
2. 認証機能の実装
3. ダッシュボードとナビゲーションの実装
4. ドキュメント管理機能の実装
5. テンプレート管理機能の実装
6. フィールド管理機能の実装
7. OCR結果プレビュー・補正UIの実装
8. バックエンドAPIとの統合
9. テストと最適化

## 8. 優先度

1. **高優先度**
   - 認証UI
   - ドキュメント一覧・詳細表示
   - OCR結果プレビュー・補正UI

2. **中優先度**
   - ダッシュボード
   - テンプレート管理
   - フィールド管理

3. **低優先度**
   - 高度な検索・フィルタリング
   - レポート機能
   - ユーザー設定

## 9. 次のステップ

1. フロントエンド開発環境のセットアップ
2. コンポーネントライブラリの構築
3. 認証UIの実装
